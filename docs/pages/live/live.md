云端直播和直播中常用到的协议

# 云端直播

云平台 提供 1.集成SDK的方式进行推流(用于手机端开播) 2.通过RTMP协议向远端服务器进行推流(用于PC端)
- 集成SDk方式

客户端(主播端) 与 客户端(用户端) 都 集成SDK， 双方都具备推拉流的能力。

客户端(主播端) 通过 UDT 私有协议 与 互动直播后台 建立联系

互动直播后台 再通过 UDT 私有协议 与 客户端(用户端) 建立联系

![SDk方式推流](https://user-gold-cdn.xitu.io/2020/2/21/17065a2966d91d3e?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)


优势在于：
1. 只需要在客户端中集成SDK，通过手机就可以开播，对于主播开播的要求比较低，适合直播业务快速铺开。
​2. 互动直播后台仅做转发，没有转码，上传CDN等额外操作，整体延迟比较低。
​3. 主播端和用户端都可以作为音视频上传的发起方，适合连麦、视频会话等场景。

- 旁路推流
H5、小程序等端是没办法接入SDK的时候，可以借助 旁路推流的方式。
旁路推流指的是通过协议转换将音视频流对接到标准的直播 CDN 系统上。目前云直播开启旁路推流后，会通过互动直播后台将音视频流推送到云直播后台，云直播后台负责将收到音视频流转码成通用的协议格式并且推送到CDN，这样H5、小程序等端就可以通过CDN拉取到通用格式的音视频流进行播放了。
![旁路推流](https://user-gold-cdn.xitu.io/2020/2/21/17065a296816df34?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)
- 通过RTMP协议方式

不仅限于手机开播的效果，要实现专业设备的开播。
我们通过使用OBS等流媒体录影程序，对专业设备录制的多路流进行合并，并且将音视频流上传到指定的推流地址，由于OBS推流使用了RTMP协议，因此我们称这一种推流类型为RTMP推流。
![RTMP推流](https://user-gold-cdn.xitu.io/2020/2/21/17065a2967d5ba1a?imageView2/0/w/1280/h/960/format/webp/ignore-error/1)
优势：
​	1.可以接入专业的直播摄像头、麦克风，直播的整体效果明显优于手机开播。
​	2.OBS已经有比较多成熟的插件，比如目前蘑菇街主播常用YY助手做一些美颜的处理，并且OBS本身已经支持滤镜、绿幕、多路视频合成等功能，功能比手机端强大。
​	劣势：
​	1.OBS本身配置比较复杂，需要专业设备支持，对主播的要求明显更高，通常需要一个固定的场地进行直播。
​	2.RTMP需要云端转码，并且本地上传时也会在OBS中配置GOP和缓冲，延时相对较长。


# 直播协议和落地场景

# 实现H5直播实践方案