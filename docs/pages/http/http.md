### 描述下从浏览器输入 URL 到页面展示所经过的一系列流程

- 浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址 [DNS 解析]
- 建立 TCP 连接 [三次握手]
- 浏览器发出读取文件(URL 中域名后面部分对应的文件)的 HTPP 请求,该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器。 [浏览器发送读取文件内容的 HTTP 请求到服务器]
- 服务器对浏览器请求作出响应,并把对应的 HTML 文本发送给浏览器。 [服务器发送 HTML 数据至浏览器]
- 浏览器开始渲染 HTML 内容 [浏览器渲染 HTML]
- 释放 TCP 链接 [四次挥手]

### TCP/IP 协议族

它是一个有关互联网相关联的所有协议的集合。包括常见的 `HTTP` `FTP` `UDP` `TCP` `IP` `ICMP` `PPPoE` `DNS` `SNMP`。
它具备分层管理的特点，分为以下四层： `应用层`、`传输层`、`网络层`和`数据链路层`。
当你的网络结构需要变动的时候，只需要将需要变动的层替换掉就可以了。

- 应用层
  常见的协议: FTP, DNS, HTTP
- 传输层
  常见的协议: TCP, UDP
- 网络层
  常见的协议: IP

- 数据链路层。

### TCP/IP 通信传输流

在客户端(发送端)发出一个 `http` 请求之后，生成 **http 请求报文**， 该请求会依次进入 `传输层` 由 `TCP` 把收到的数据(HTTP 请求报文)进行**分割**，并在各个报文上打上标记**序号**及**端口号**，然后转发到**网络层**。
在`网络层`由 `IP` 增加作为通信目的地的 `MAC 地址`后转发给`链路层`。这样一来，发往网络的通信请求就完备了。

在接收端的服务器的数据链路层接收到数据后， **按序往上层发送**，一直到`应用层`。当传输到`应用层`之后，才能算真正接收到由客户端发送过来的 HTTP 请求。

**发送端**在发送数据的时候，在经过 **应用层 =》 传输层 =》 网络层 =》 数据链路层** 这样的顺序传递数据的时候，都会在每一层打上该层所属的**首部信息**，
**接收端**在接收数据的时候，在经过**数据链路层 =》 网络层 =》 传输层=》 应用层** 时，都会将对应的**首部信息**给去掉。

## IP

IP(Internet Protocol) 网际协议位于网络层。
它的作用就是将各种数据包发送给对方。 需要依靠两个地址 分别是 IP 地址 和 MAC 地址。
IP 地址：指明了节点被分配到的地址。(可改变)
MAC 地址：指的是网卡所属的固定地址。(不可改变)

ARP(Address Resolution Protocol)协议, 是一种用以地址解析的协议，根据 IP 地址查找到对应的 MAC 地址。
为啥会用到 ARP 协议， 因为在使用 IP 协议进行数据包的转发的时候，需要通过 MAC 地址来搜索下一个中转目标。而有时仅仅知道的是 IP 地址，

## TCP

TCP() 位于传输层，提供可靠的字节流服务。

- 可靠的
  依靠 `TCP 三次握手`来实现可靠的连接。
  用 TCP 协议将数据包传输出去之后，TCP 不会对传送后的情况置之不理，它一定会向对方确认是否成功到达。握手过程中使用到了 TCP 的标志(flag),分别是 `SYN` 和 `ACK`
  TCP 三次握手的全流程。

发送端首先发送一个带 `SYN` 标志的数据包给对方。接收端收到后，回传一个带有 `SYN/ACK` 标志的数据包以示传达确认信息。最后，发送端再回传一个带 `ACK` 标志的数据包，代表握手结束。

如果说，这个握手过程因为不知名的原因**中断**了，那么 TCP 会**再次**以相同的顺序发送相同数据包。
![TCP三次握手](https://blog.jiar.me/2017/08/11/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%AE%80%E4%BB%8B/tcp_hand_shake_detail.png)
[TCP 三次握手](https://blog.jiar.me/2017/08/11/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B%E7%AE%80%E4%BB%8B/)

- 字节流
  所谓的字节流，就是将收到的 **HTTP 请求报文数据**分割成以`报文段`作为单位的`数据包`。

## DNS

DNS(Domain Name System) 主要负责域名解析(域名到 IP)，位于应用层。

## 为何会出现两次请求，一次为正常的 get 或者 post 一次为 options

为什么会多一次的 options 请求？
三种情况会出现 `options`的预请求。

- 在 HTTP 头部添加了自定义字段，此时该 HTTP 请求变为复杂请求。
- 在前后端交互过程中出现了跨域的情况。
- 请求头的 content-type 参数：application/x-www-form-urlencoded，multipart/form-data，text/plain 之外的格式。

之所以会有`options`请求,目的就是去服务器检查一下接下来要到用的方法(GET、POST、PUT、detele)在服务器上是否支持。

只有当预请求返回**200** 之后,才会进行接下来的正常请求。
如何避免多次出现`options`请求，在服务器端我们可以在 options 返回是做一次 options 缓存，告知前端以后在此请求这个接口就不要在发 options 了，服务器响应时可设置 `Access-Control-Max-Age`的时间，默认 10 分钟;

[options 请求](https://juejin.cn/post/6855989328876617736)

## 请求报文的组成

请求方法、请求 URL、协议版本、可选的请求首部字段和内容实体组成。

## 响应报文的组成

协议版本、状态码(表示成功或者失败的数字代码)、用以解释状态码的原因短语、可选的响应首部字段以及实体主体构成。

## RESTful API

[RESTful](https://cloud.tencent.com/developer/article/1519246)

## HTTP 是无状态的协议

无状态协议指的是无法根据之前的请求状态来处理现在这次的请求。
使用`cookie`来让每一次的请求，都具备`状态`.

## HTTP 的持久连接和管线化

在 HTTP 的初始化版本中，每进行一次 HTTP 通信就要重新建立一次 TCP 连接，这样无疑增加了许多不必要的通信成本。

- 持久化连接
  也被称为 HTTP Keep-alive. 它的特点是，只要任意一端没有明确提出断开连接，则保持 TCP 连接状态。
  所带来的结果便是，建立一次 TCP 连接后可进行多次的请求和响应的交互。
  在 HTTP/1.1 版本中，所有的连接默认都是 持久化连接。

- 管线化
  持久化连接使得多请求以管线化方式发送成为可能。(因为每次 htp 请求不用都建立新的 tcp 连接，只最开始建立一次就好了，那么我们就可以不用等待上一个 http 请求结束就可以直接发送下一个请求)。
  这样就可以做到同时并行发送多个请求，而不需要一个接一个地等到响应了。

### 状态码

- 1XX (信息性状态码) 表示接收的请求正在处理。
- 2XX (成功状态码) 表示正常处理完毕。
- 3XX (重定向状态码) 表示需要进行附加操作以完成请求，[304 除外]
- 4XX (客户端错误状态码) 表示服务器无法处理请求
- 5XX (服务器错误状态码) 表示服务器处理请求出错

#### 2XX

- 200 OK 请求成功
- 204 No Content 请求成功，但返回的实体信息为 null， 适用场景：只需要客户端往服务器发送信息，而不需要服务器返回新的信息。
- 206 Partial Content 表示客户端进行了范围请求，而服务器成功执行了这部分的 GET 请求。响应报文中包含了由 `Content-Range`指定范围的实体内容。

#### 3XX

- 301 Moved Permanently 永久性重定向。
- 302 Found 临时性重定向。
- 303 See Other 表示由于请求对应的资源存在另一个 URI,应使用 GET 方法定向获取请求的资源。
- 304 Not Modified 表示服务器端资源未改变，可直接使用客户端未过期的资源。虽然在 3XX 系列状态码中，但是和重定向没啥关系。

**注意** 当 301，302，303 响应状态码返回时，几乎所有的浏览器都会把 POST 改成 GET,并删除请求报文内的主体，之后请求会再次发送。

- 307 Temporary Redirect 临时重定向，不会从 POST 变成 GET.

#### 4XX

- 401 Unauthorized 认证失败
- 403 Forbidden 表示对请求资源的访问被服务器拒绝了。一般表示 Token 验证失败。
- 404 Not Found 未找到。

#### 5XX

- 500 Internal Server Error 服务器内部错误
- 503 Service Unavailable 表示服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。

## HTTP 通信过程

### HTTP 方法

### 协议格式

### 报文结构

### 首部字段

### 状态码

### HTTP 通信过程中代理、网关、隧道等的作用

## HTTP 安全

### HTTPS

### SSL

### 证书认证

### 加密机制

### Web 攻击手段
